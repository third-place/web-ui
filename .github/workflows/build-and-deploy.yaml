on:
  push:
    branches:
      - main
jobs:
  run-tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - run: yarn
      - run: yarn run tests
  publish-docker-image:
    needs: run-tests
    uses: third-place/actions/.github/workflows/publish-docker-image.yaml@main
    secrets: inherit
    with:
      name: third-place/web-ui
      directory: .
  deploy-service:
    needs: publish-docker-image
    uses: third-place/actions/.github/workflows/deploy-service.yaml@main
    secrets:
      PAT: ${{ secrets.CR_PAT }}
